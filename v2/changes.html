---
layout: default
---

<section>
  <h1>Changes at a glance</h1>
  <ul>
    <li>
      <p>
        <strong>ES6 Syntax:</strong> Refactored all code to use the new ES6/ES2015 syntax (especially arrow functions, classes, spread operators etc.)
      </p>
    </li>
    <li>
      <p>
        <strong>New build system:</strong> Webpack is being used as a build system to compile the code. It can be imported like this:
      </p>
      <pre><code class="javascript">// EITHER - accessing modules with &gt;script&lt; tags
var WaveSurfer = window.WaveSurfer;
var TimelinePlugin = window.WaveSurfer.timeline;
var MinimapPlugin = window.WaveSurfer.minimap;

// OR - importing as es6 module
import WaveSurfer from 'wavesurfer.js';
import TimelinePlugin from 'wavesurfer.js/dist/plugin/wavesurfer.timeline.min.js';
import MinimapPlugin from 'wavesurfer.js/dist/plugin/wavesurfer.minimap.min.js';

// OR - importing as require.js/commonjs modules
var WaveSurfer = require('wavesurfer.js');
var TimelinePlugin = require('wavesurfer.js/dist/plugin/wavesurfer.timeline.min.js');
var MinimapPlugin = require('wavesurfer.js/dist/plugin/wavesurfer.minimap.min.js');
</code></pre>
    </li>
    <li>
      <p>
        <strong>Documentation:</strong> Added loads of jsdoc style documentation tags and the esdoc documentation generator (the documentation needs to be also made public, currently it is generated into ./doc by calling npm run doc) – The idea being that it is easier to keep documentation up to date easier than having to always edit HTML code in the gh-pages branch.
      </p>
    </li>
    <li>
      <p>
        <strong>New plugin API:</strong> Previously all plugins, backends and drawers relied on the window.WaveSurfer global variable. This made it difficult to work with module bundlers (You had to expose the WaveSurfer object, which means it's not really modular) – To fix this plugins now all follow a common format which is used by wavesurfer core to register the plugins correctly. (see an example of a plugin class at the bottom of this page)
      </p>
      <p>A plugin can be destroyed like this: <code>wavesurfer.destroyPlugin('timeline');</code></p>
      <p>
        There are three ways to add a plugin:
      </p>
      <ol>
        <li>
          <p>
            Adding and initialising plugin immediately (this will do in 99% of the cases):
          </p>
          <pre><code class="javacript">var wavesurfer = WaveSurfer.create({
    container: '#waveform',
    waveColor: 'violet',
    plugins: [
        TimelinePlugin.create({
            container: '#wave-timeline'
        })
    ]
});
</code></pre>
        </li>
        <li>
          <p>
            Adding a plugin immediately and initialising it dynamically:
          </p>
          <pre><code class="javacript">var wavesurfer = WaveSurfer.create({
    container: '#waveform',
    plugins: [
        TimelinePlugin.create({
            container: '#wave-timeline',
            deferInit: true // stop the plugin from initialising immediately
        })
    ]
});
wavesurfer.initPlugin('timeline');
</code></pre>
        </li>
        <li>
          <p>
            Adding and initialising a plugin dynamically:
          </p>
          <pre><code class="javacript">var wavesurfer = WaveSurfer.create({
    container: '#waveform',
    waveColor: 'violet'
});
// adding and initialising a plugin after initialisation
wavesurfer.addPlugin(TimelinePlugin.create({
    container: '#wave-timeline',
})).initPlugin('timeline');
</code></pre>
        </li>
      </ol>
    </li>
    <li>
      <p>
        <strong>New HTML init script:</strong> The html-init.js was extended to allow more complicated initialisation options (including autoloading of plugin code) – Example usage:
      </p>
      <pre><code class="html">&lt;wavesurfer&gt;
  data-url="../media/demo.wav"
  data-plugins="minimap,timeline"
  data-minimap-height="30"
  data-minimap-wave-color="#ddd"
  data-minimap-progress-color="#999"
  data-timeline-font-size="13px"
  data-timeline-container="#timeline"
&gt;
&lt;/wavesurfer&gt;
&lt;div id="timeline"&gt;&lt;/div&gt;
</code></pre>
    </li>
    <li>
      <p>
        <strong>MultiCanvas is the default renderer:</strong> It supports the functionality of the default renderer but is not constrained by maximum canvas sizes.
      </p>
    </li>
  </ul>
</section>